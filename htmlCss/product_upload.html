<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="frame.css">
  <!-- Bootstrap
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
  <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"> </script>
  <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-auth.js"> </script>
  <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-database.js"> </script>
  <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-storage.js"> </script>
</head>

<body style="background-color: thistle;">
  <a href= home_page.html>
    <img class = "logo" src=logo_transparent.png alt="OWG logo" height=100 width=165>
  </a>

  <div class = "topNavBar">
    <a href = "about"> About us </a>
    <a href = "contact"> Contact </a>
  </div>

  <nav class = "sideNavBar" id = "side">
    <ul>
      <li> <a href = home_page.html> Home </a> </li>
      <li> <a href = search.html> Search </a> </li>
      <li> <a href = product_upload.html>Post</a></li>
      <li> <a href = liked_items.html> Likes </a> </li>
      <li> <a href = shopping_cart.html> Cart </a> </li>
      <li> <a href = user_profile.html class="active"> Profile </a> </li>
      <li> <a href="javascript:void(0);" class="icon" onclick="bottomNavBar()"> </a> </li>
      <li> <a id="logout" href = "#">Logout</a> </li>
      <li> <a href="javascript:void(0);" class="icon" onclick="bottomNavBar()"> </a> </li>
    </ul>
  </nav>

  <header class = "header"> post an item</header>

  <div class = "form-popup" id ="myform">
    <form class="form_content" id = "upload-form">
      <h1>Post your product</h1>
      <label for="product_name"><b>Product's name:</b></label><br>
      <input type="text" placeholder="Enter your product's name" required id="product"><br>
  
      <label for="product_description"><b>Description:</b></label><br>
      <input type="text" placeholder="Describe your product..." required id="description"><br>
  
      <label for="product_price"><b>Price:</b></label><br>
      <input type="text" placeholder="Enter your product's price" required id= "price"><br>
      
      <label for="product_photo"><b>Please upload product's photo:</b></label><br>
      <input type="file" value ="upload" name="picture" accept="image/*" id="main-image"><br>
      <img id="selected-image" style="width: 50%">
    
      <button id="upload-post" type="submit">Submit</button>
      <button type="button" class="cancel">Cancel</button>
    </form>
  </div>

  <br>
  <script>

    //Upload and Save Images to Firebase Storage and Firebase Database**
    var chosen_img = document.getElementById('main-image');
    chosen_img.addEventListener('change', function(e){
  
        var file = e.target.files[0];
      
        var selected_file = file.name
        var storageRef = firebase.storage().ref("user_photo/" + file.name);
    
        var uploadTask = storageRef.put(file);
        console.log("File sent to storage")

        uploadTask.then(function(){
          var downloadURL = storageRef.getDownloadURL().then(function(url){
          var img = document.getElementById('selected-image');
          img.src = url;
        }).catch(function(error) {
          window.alert("Error!")
          });
        })
      })
        
  
  </script>
  
  <script src="/js/index.js"></script>

  </body>

</html>
